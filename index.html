<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Surguja Property Hub</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
*{box-sizing:border-box;margin:0;padding:0}
html,body{font-family:'Inter',sans-serif;background:#f7f9fc;color:#111;-webkit-text-size-adjust:100%;overflow-x:hidden}
header{position:sticky;top:0;z-index:10;background:#fff;display:flex;align-items:center;gap:10px;padding:10px 14px;border-bottom:1px solid rgba(0,0,0,.05);box-shadow:0 2px 6px rgba(0,0,0,.05)}
.logo{width:38px;height:38px;border-radius:10px;background:linear-gradient(135deg,#1e88e5,#42a5f5);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700}
h1{font-size:1.1rem;font-weight:700}
.container{max-width:900px;margin:auto;padding:16px}
.card{background:#fff;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,.06);padding:16px;margin-bottom:16px}
h2{margin-bottom:8px;font-size:1.1rem}
.small-muted{color:#6b7280;font-size:.95rem;margin-bottom:10px}
label{display:block;margin:6px 0 4px;font-weight:600;font-size:.95rem}
input,select,textarea{width:100%;padding:10px;border-radius:10px;border:1px solid #dbe6f0;font-size:1rem}
input:focus,select:focus,textarea:focus{border-color:#1e88e5;outline:none;box-shadow:0 0 0 2px rgba(30,136,229,.15)}
.grid{display:grid;gap:10px}
@media(min-width:720px){.grid-2{grid-template-columns:1fr 1fr}}
button{border:0;border-radius:10px;padding:10px 14px;font-weight:700;font-size:.95rem;cursor:pointer}
.btn-primary{background:#1e88e5;color:#fff}
.btn-primary:hover{background:#1565c0}
.btn-ghost{background:#eef4fb;color:#222}
.actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
.class-list{display:flex;flex-direction:column;gap:12px}
.class-item{background:#fff;padding:12px;border-radius:12px;box-shadow:0 4px 10px rgba(0,0,0,.05);display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap}
.class-info{min-width:0}
.class-info strong{display:block;font-size:1rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.class-info span{color:#6b7280;font-size:.9rem}
.badge{background:#e3f2fd;color:#0d47a1;padding:4px 8px;border-radius:20px;font-size:.8rem;font-weight:700;margin-right:5px}
.modal{position:fixed;inset:0;background:rgba(0,0,0,.55);display:none;align-items:center;justify-content:center;z-index:100}
.modal.active{display:flex}
.modal-box{background:#fff;border-radius:12px;padding:16px;max-width:480px;width:90%}
.toast{position:fixed;bottom:16px;right:16px;background:#111;color:#fff;padding:10px 14px;border-radius:10px;opacity:0;transition:.3s;z-index:200}
.toast.show{opacity:1}
table{width:100%;border-collapse:collapse;margin-top:10px}
th,td{padding:8px 10px;border-bottom:1px solid rgba(0,0,0,.05);font-size:.9rem;text-align:left}
th{background:#f2f5f9;font-weight:700}
footer{text-align:center;padding:14px;color:#6b7280;font-size:.9rem}
.user-actions{display:flex;gap:6px;margin-top:6px}
.user-actions button{font-size:.8rem;padding:6px 10px}
</style>
</head>
<body>
<header><div class="logo">SP</div><h1>Surguja Property Hub</h1></header>

<main class="container">

<section class="card">
<h2>अपनी आवश्यकता दर्ज करें</h2>
<p class="small-muted">सुरगुजा संभाग केंद्रित खरीदार सेवा। अपनी आवश्यकता साझा करें; जैसे ही उपयुक्त संपत्ति उपलब्ध होगी, हम आपको सूचित करेंगे।</p>

<form id="reqForm">
<label>नाम</label>
<input id="name" type="text" placeholder="पूरा नाम">

<label>मोबाइल नंबर (अनिवार्य)</label>
<input id="phone" type="tel" placeholder="10-digit mobile" required>

<div class="grid grid-2">
<div>
<label>प्रॉपर्टी प्रकार</label>
<select id="ptype">
<option>Plot</option><option>House</option><option>Land</option><option>Commercial</option><option>Rental</option>
</select>
</div>
<div>
<label>स्थान</label>
<input id="location" type="text" placeholder="e.g., Ambikapur">
</div>
</div>

<div class="grid grid-2">
<div><label>Budget Min (₹)</label><input id="budgetMin" type="number" placeholder="e.g., 500000"></div>
<div><label>Budget Max (₹)</label><input id="budgetMax" type="number" placeholder="e.g., 2500000"></div>
</div>

<label>तारीख चुनें</label>
<input id="postDate" type="date">

<label>नोट्स</label>
<textarea id="notes" rows="3" placeholder="Facing, loan need, etc."></textarea>

<div class="actions">
<button type="submit" class="btn-primary">Submit Requirement</button>
<button type="reset" class="btn-ghost">Clear</button>
</div>
</form>
</section>

<section class="card">
<h2>Classified Listings</h2>
<div id="classGrid" class="class-list" style="margin-top:8px"></div>
</section>

<section id="adminPanel" class="card" style="display:none">
<h2>Admin Panel</h2>
<div style="overflow:auto">
<table>
<thead><tr><th>Date</th><th>Name</th><th>Phone</th><th>Type</th><th>Location</th><th>Budget Range</th><th>Actions</th></tr></thead>
<tbody id="reqBody"></tbody>
</table>
</div>
</section>

<div style="text-align:center;margin-top:10px">
<button id="adminBtn" class="btn-ghost">Admin</button>
</div>

</main>

<footer>© 2025 Surguja Property Hub · Contact: +91-8319454138</footer>

<!-- Modal + Toast -->
<div id="classModal" class="modal"><div class="modal-box"><h3 id="mTitle"></h3><div id="mBody"></div><button id="closeModal" class="btn-primary" style="margin-top:10px;width:100%">Close</button></div></div>
<div id="toast" class="toast"></div>

<script>
const $=q=>document.querySelector(q);
const dbKey='reqDB_v3';
const ADMIN_PASSWORD='surguja@2025';
const REVEAL='8319454138';

function toast(t){const x=$('#toast');x.textContent=t;x.classList.add('show');setTimeout(()=>x.classList.remove('show'),2000);}
function load(){return JSON.parse(localStorage.getItem(dbKey)||'[]');}
function save(d){localStorage.setItem(dbKey,JSON.stringify(d));}

function fmtINR(n){if(!n)return'';return new Intl.NumberFormat('en-IN',{style:'currency',currency:'INR',maximumFractionDigits:0}).format(n);}
function maskLast5(v){const s=(v||'').replace(/\D/g,'');return '*****'+s.slice(-5);}

/* Demo classifieds */
const classifiedsStatic=[
 {title:'House for Sale – Ambikapur',type:'House',area:'Ambikapur',price:3200000,desc:'2BHK near main market',phone:'9876543210'},
 {title:'Plot – Udaipur',type:'Plot',area:'Udaipur',price:900000,desc:'East-facing 20ft road',phone:'9988776655'}
];

function renderClassifieds(){
 const grid=$('#classGrid');
 grid.innerHTML='';
 const reqs=load();
 const combined=[
  ...reqs.map(r=>({title:`${r.ptype} Requirement – ${r.location||''}`,type:r.ptype,area:r.location,price:`${r.budgetMin||''}-${r.budgetMax||''}`,desc:r.notes,phone:r.phone,id:r.id,user:true,date:r.date})),
  ...classifiedsStatic
 ];
 combined.sort((a,b)=>new Date(b.date||0)-new Date(a.date||0));
 combined.forEach(c=>{
   const div=document.createElement('div');
   div.className='class-item';
   div.innerHTML=`<div class="class-info"><strong>${c.title}</strong><span>${c.area||'-'} • ${c.price}</span></div><div style="display:flex;gap:6px;align-items:center;"><button class="btn-ghost" style="padding:6px 10px;font-size:.9rem">View</button>${c.user?`<button class="btn-ghost" style="padding:6px 10px;font-size:.9rem" data-edit="${c.id}">Edit</button><button class="btn-ghost" style="padding:6px 10px;font-size:.9rem" data-del="${c.id}">Delete</button>`:''}</div>`;
   div.querySelector('.btn-ghost').onclick=(e)=>{e.stopPropagation();openModal(c)};
   grid.appendChild(div);
 });
 grid.querySelectorAll('[data-del]').forEach(b=>{
   b.onclick=()=>{if(confirm('Delete this post?')){const all=load().filter(x=>x.id!=b.dataset.del);save(all);renderClassifieds();renderTable();toast('Deleted');}};
 });
 grid.querySelectorAll('[data-edit]').forEach(b=>{
   b.onclick=()=>{const rec=load().find(x=>x.id==b.dataset.edit);if(!rec)return;fillForm(rec,true);window.scrollTo({top:0,behavior:'smooth'});}
 });
}

function openModal(c){
 $('#mTitle').textContent=c.title;
 $('#mBody').innerHTML=`<p><strong>Type:</strong> ${c.type}</p><p><strong>Area:</strong> ${c.area}</p><p><strong>Price Range:</strong> ${c.price}</p><p><strong>Details:</strong> ${c.desc||'-'}</p><p><strong>Phone:</strong> ${maskLast5(c.phone)}<br><button id='revealBtn' class='btn-ghost' style='margin-top:8px'>Reveal</button></p>`;
 $('#classModal').classList.add('active');
 $('#revealBtn').onclick=()=>alert(\`contact ${REVEAL} to know customer's contact details.\`);
}
$('#closeModal').onclick=()=>$('#classModal').classList.remove('active');

function fillForm(r,isEdit=false){
 $('#name').value=r.name;
 $('#phone').value=r.phone;
 $('#ptype').value=r.ptype;
 $('#location').value=r.location;
 $('#budgetMin').value=r.budgetMin;
 $('#budgetMax').value=r.budgetMax;
 $('#notes').value=r.notes;
 $('#postDate').value=r.date?new Date(r.date).toISOString().slice(0,10):'';
 $('#reqForm').dataset.editId=isEdit?r.id:'';
}

$('#reqForm').onsubmit=e=>{
 e.preventDefault();
 const phone=$('#phone').value.trim();
 if(phone===''||phone.length<10){toast('मोबाइल नंबर आवश्यक है');return;}
 const now=new Date();
 const id=$('#reqForm').dataset.editId||Date.now().toString();
 const newRec={id,name:$('#name').value,phone,ptype:$('#ptype').value,location:$('#location').value,budgetMin:$('#budgetMin').value,budgetMax:$('#budgetMax').value,notes:$('#notes').value,date:$('#postDate').value||now.toISOString()};
 let all=load();
 const existingIndex=all.findIndex(x=>x.id==id);
 if(existingIndex>=0) all[existingIndex]=newRec; else all.unshift(newRec);
 save(all);
 $('#reqForm').reset();
 $('#reqForm').dataset.editId='';
 toast(existingIndex>=0?'Updated':'Submitted');
 renderClassifieds();renderTable();
};

function renderTable(){
 const tb=$('#reqBody');
 tb.innerHTML='';
 const rows=load();
 if(!rows.length){tb.innerHTML='<tr><td colspan="7" style="text-align:center;color:#777;padding:10px">No data</td></tr>';return;}
 rows.forEach(r=>{
   const tr=document.createElement('tr');
   tr.innerHTML=\`<td>\${new Date(r.date).toLocaleDateString()}</td><td>\${r.name}</td><td>\${r.phone}</td><td>\${r.ptype}</td><td>\${r.location}</td><td>\${r.budgetMin||'-'}–\${r.budgetMax||'-'}</td><td><button class='btn-ghost' data-edit='\${r.id}' style='font-size:.8rem;padding:4px 8px'>Edit</button><button class='btn-ghost' data-del='\${r.id}' style='font-size:.8rem;padding:4px 8px'>Delete</button></td>\`;
   tb.appendChild(tr);
 });
 tb.querySelectorAll('[data-del]').forEach(b=>{
   b.onclick=()=>{if(confirm('Delete this requirement?')){const id=b.dataset.del;const all=load().filter(x=>x.id!=id);save(all);renderTable();renderClassifieds();toast('Deleted');}};
 });
 tb.querySelectorAll('[data-edit]').forEach(b=>{
   b.onclick=()=>{const rec=load().find(x=>x.id==b.dataset.edit);fillForm(rec,true);window.scrollTo({top:0,behavior:'smooth'});}
 });
}

$('#adminBtn').onclick=()=>{
 const p=prompt('Enter Admin Password');
 if(p===ADMIN_PASSWORD){$('#adminPanel').style.display='block';renderTable();window.scrollTo({top:document.body.scrollHeight,behavior:'smooth'});}else toast('Wrong Password');
};

renderClassifieds();
</script>
</body>
</html>