<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Surguja Property Hub</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
/* Mobile-first, no horizontal overflow */
*{box-sizing:border-box}
html,body{height:100%;margin:0;padding:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:#f7f9fc;color:#111; -webkit-text-size-adjust:100%}
body{padding-bottom:80px} /* space for bottom controls if needed */

:root{
  --bg:#f7f9fc;
  --card:#ffffff;
  --primary:#1e88e5;
  --primary-dark:#1565c0;
  --muted:#6b7280;
  --radius:12px;
  --shadow: 0 6px 18px rgba(13,21,35,0.08);
}

/* Page frame */
header{
  position:sticky;top:0;z-index:20;
  background:var(--card);
  display:flex;align-items:center;gap:12px;padding:10px 14px;
  border-bottom:1px solid rgba(0,0,0,0.04);
}
.header-left{display:flex;align-items:center;gap:10px;min-width:0}
.logo {
  width:40px;height:40px;border-radius:10px;
  background:linear-gradient(135deg,var(--primary),#42a5f5);
  display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;
  flex-shrink:0;
  box-shadow:0 6px 18px rgba(30,136,229,0.12);
}
.app-title{font-size:1.05rem;font-weight:700;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}

/* container keeps content centered and prevents horizontal overflow */
.container{width:100%;max-width:920px;margin:0 auto;padding:16px}

/* Card */
.card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:14px;margin-bottom:16px;overflow:hidden}
.card h2{margin:0 0 8px;font-size:1.05rem}
.small-muted{color:var(--muted);font-size:.95rem;margin-bottom:10px;line-height:1.3}

/* Form controls - full width, touch friendly */
label{display:block;margin:6px 0 6px;font-weight:600;font-size:.95rem}
input,select,textarea{width:100%;padding:10px 12px;border-radius:10px;border:1px solid #dbe6f0;background:#fff;font-size:1rem;line-height:1.3}
input:focus,select:focus,textarea:focus{outline:none;box-shadow:0 6px 18px rgba(30,136,229,0.08);border-color:var(--primary)}
textarea{min-height:78px;resize:vertical}

/* grid responsive */
.grid{display:grid;gap:12px}
@media(min-width:720px){.grid-2{grid-template-columns:1fr 1fr;gap:12px}}

/* actions */
.actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
button{border:0;border-radius:10px;padding:10px 14px;font-weight:700;font-size:0.98rem}
.btn-primary{background:var(--primary);color:#fff}
.btn-primary:hover{background:var(--primary-dark)}
.btn-ghost{background:#eef6ff;color:#0b2540}

/* Classified list */
.class-list{display:flex;flex-direction:column;gap:12px;padding:2px 0}
.class-item{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  background:var(--card);
  padding:12px;
  border-radius:12px;
  box-shadow: 0 6px 18px rgba(13,21,35,0.04);
  min-height:56px;
  width:100%;
  overflow:hidden;
}
.class-left{display:flex;align-items:center;gap:12px;min-width:0}
.badge{background:#e9f2ff;color:var(--primary);padding:6px 10px;border-radius:999px;font-weight:700;font-size:.82rem;flex-shrink:0}
.class-info{min-width:0}
.class-info strong{display:block;font-size:1rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.class-info .meta{color:var(--muted);font-size:.92rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}

/* small view button */
.view-btn{background:#f3f7fb;border-radius:10px;padding:8px 10px;font-weight:700;color:#1a2b3a;min-width:64px;text-align:center}

/* modal */
.modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.45);z-index:40}
.modal.active{display:flex}
.modal-box{width:94%;max-width:520px;background:var(--card);padding:16px;border-radius:12px;box-shadow:var(--shadow)}

/* toast */
.toast{position:fixed;right:14px;bottom:14px;background:#111;color:#fff;padding:10px 14px;border-radius:10px;opacity:0;transition:opacity .2s}
.toast.show{opacity:1}

/* admin area */
#adminPanel table{width:100%;border-collapse:collapse;border-radius:8px;overflow:hidden}
#adminPanel th,#adminPanel td{padding:8px 10px;text-align:left;border-bottom:1px solid rgba(0,0,0,0.04);font-size:.95rem}
#adminPanel thead th{background:#fafbfc;font-weight:700}

/* Footer */
footer{padding:14px 8px;text-align:center;color:var(--muted);font-size:.95rem}
</style>
</head>
<body>

<header>
  <div class="header-left">
    <div class="logo">SP</div>
    <div style="min-width:0">
      <div class="app-title">Surguja Property Hub</div>
    </div>
  </div>
</header>

<main class="container">
  <!-- Requirement form -->
  <section class="card" aria-labelledby="reqTitle">
    <h2 id="reqTitle">अपनी आवश्यकता दर्ज करें</h2>
    <p class="small-muted">सुरगुजा संभाग केंद्रित खरीदार सेवा। अपनी आवश्यकता साझा करें; जैसे ही उपयुक्त संपत्ति उपलब्ध होगी, हम आपको सूचित करेंगे।</p>

    <form id="reqForm" novalidate>
      <label for="name">नाम</label>
      <input id="name" name="name" type="text" placeholder="पूरा नाम">

      <label for="phone">फ़ोन नंबर (अनिवार्य)</label>
      <input id="phone" name="phone" type="tel" inputmode="numeric" placeholder="10-digit mobile" required>

      <label for="whatsapp">व्हाट्सएप</label>
      <input id="whatsapp" name="whatsapp" type="tel" inputmode="numeric" placeholder="Optional">

      <div class="grid grid-2" style="margin-top:8px">
        <div>
          <label for="location">स्थान</label>
          <input id="location" name="location" type="text" placeholder="e.g., Ambikapur">
        </div>
        <div>
          <label for="ptype">प्रॉपर्टी प्रकार</label>
          <select id="ptype" name="ptype">
            <option>Plot</option>
            <option>House</option>
            <option>Land</option>
            <option>Commercial</option>
            <option>Rental</option>
          </select>
        </div>
      </div>

      <div class="grid grid-2" style="margin-top:8px">
        <div>
          <label for="budgetMin">Budget Min (₹)</label>
          <input id="budgetMin" name="budgetMin" type="number" placeholder="e.g., 500000">
        </div>
        <div>
          <label for="budgetMax">Budget Max (₹)</label>
          <input id="budgetMax" name="budgetMax" type="number" placeholder="e.g., 2500000">
        </div>
      </div>

      <label for="notes" style="margin-top:8px">नोट्स</label>
      <textarea id="notes" name="notes" placeholder="Road width, facing, loan need, etc."></textarea>

      <div style="margin-top:10px">
        <label style="font-weight:600"><input id="consent" type="checkbox" style="margin-right:8px"> मुझे फोन/व्हाट्सएप पर संपर्क किया जा सकता है</label>
      </div>

      <div class="actions" style="margin-top:12px">
        <button type="submit" class="btn-primary">Submit Requirement</button>
        <button type="reset" class="btn-ghost" type="button">Clear</button>
      </div>
    </form>
  </section>

  <!-- Classifieds -->
  <section class="card" aria-labelledby="listTitle">
    <h2 id="listTitle">Classified Listings</h2>
    <div id="classGrid" class="class-list" aria-live="polite" style="margin-top:8px"></div>
    <p class="small-muted" style="margin-top:10px">लिहाजा आप चाहें तो यहाँ अपनी लिस्टिंग जोड़ सकते हैं।</p>
  </section>

  <!-- Admin -->
  <section id="adminPanel" class="card" style="display:none">
    <h2>Admin Panel</h2>
    <div style="overflow:auto">
      <table>
        <thead><tr><th>Date</th><th>Name</th><th>Phone</th><th>Type</th><th>Location</th></tr></thead>
        <tbody id="reqBody"></tbody>
      </table>
    </div>
  </section>

  <div style="text-align:center;margin-top:8px">
    <button id="adminBtn" class="btn-ghost">Admin</button>
  </div>

</main>

<footer>© 2025 Surguja Property Hub · Contact: +91-8319454138</footer>

<!-- modal + toast -->
<div id="classModal" class="modal" aria-hidden="true">
  <div class="modal-box" role="dialog" aria-modal="true">
    <h3 id="mTitle"></h3>
    <div id="mBody" style="margin-top:8px"></div>
    <div style="margin-top:12px"><button id="closeModal" class="btn-primary" style="width:100%">Close</button></div>
  </div>
</div>

<div id="toast" class="toast" aria-live="polite"></div>

<script>
/* Simple client-only app (localStorage) */
/* Constants */
const $ = sel => document.querySelector(sel);
const dbKey = 'reqDB_v1';
const ADMIN_PASSWORD = 'surguja@2025';
const REVEAL = '8319454138';

/* Utils */
function toast(msg){
  const t = $('#toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(()=>t.classList.remove('show'), 2200);
}
function loadDB(){ try { return JSON.parse(localStorage.getItem(dbKey) || '[]'); } catch(e){ return []; } }
function saveDB(list){ localStorage.setItem(dbKey, JSON.stringify(list)); }

/* Demo classifieds data - in production load from Airtable or server */
const classifieds = [
  { title:'House for Sale – Ambikapur', type:'House', area:'Ambikapur', price:3200000, phone:'9876543210', size:'1200 sqft', desc:'2BHK near main market, loan possible' },
  { title:'Plot – Udaipur', type:'Plot', area:'Udaipur', price:900000, phone:'9988776655', size:'1500 sqft', desc:'East-facing, 20ft road' },
  { title:'Commercial Shop – Premnagar', type:'Commercial', area:'Premnagar', price:1500000, phone:'9123456789', size:'300 sqft', desc:'Main road frontage' },
  { title:'2BHK Flat for Rent – Ambikapur', type:'Rental', area:'Ambikapur', price:12000, phone:'9012345678', size:'2BHK', desc:'Semi-furnished, near bus stand' }
];

function fmtINR(n){
  if(n==null || n==='') return '';
  if(typeof n === 'number') return new Intl.NumberFormat('en-IN',{style:'currency',currency:'INR',maximumFractionDigits:0}).format(n);
  return n;
}
function maskLast5(phone){
  const s = (phone || '').replace(/\D/g,'');
  return '*****' + s.slice(-5);
}

/* Render classifieds list */
function renderClassifieds(){
  const grid = $('#classGrid');
  grid.innerHTML = '';
  classifieds.forEach(item => {
    const row = document.createElement('div');
    row.className = 'class-item';
    row.innerHTML = `
      <div class="class-left">
        <div class="badge">${item.type}</div>
        <div class="class-info">
          <strong title="${(item.title||'')}">${item.title}</strong>
          <div class="meta">${item.area} • ${fmtINR(item.price)} ${item.size? '• ' + item.size : ''}</div>
        </div>
      </div>
      <div><button class="view-btn" aria-label="View details">View</button></div>
    `;
    row.addEventListener('click', ()=> openModal(item));
    grid.appendChild(row);
  });
}

/* Open modal */
function openModal(item){
  $('#mTitle').textContent = item.title || '';
  $('#mBody').innerHTML = `
    <p><strong>Type:</strong> ${item.type || '-'}</p>
    <p><strong>Area:</strong> ${item.area || '-'}</p>
    <p><strong>Price:</strong> ${fmtINR(item.price)}</p>
    ${item.size? `<p><strong>Size:</strong> ${item.size}</p>` : ''}
    ${item.desc? `<p><strong>Details:</strong> ${item.desc}</p>` : ''}
    <p><strong>Phone:</strong> ${maskLast5(item.phone)} <br>
       <button id="revealBtn" class="btn-ghost" style="margin-top:8px">Reveal</button></p>
  `;
  $('#classModal').classList.add('active');
  $('#revealBtn').onclick = ()=> alert(`contact ${REVEAL} to know customer's contact details.`);
}
$('#closeModal').onclick = ()=> $('#classModal').classList.remove('active');

/* Form submit - saves to localStorage (demo) */
$('#reqForm').addEventListener('submit', function(e){
  e.preventDefault();
  if(!$('#consent').checked){
    toast('कृपया सहमति दें कि आपको संपर्क किया जा सकता है');
    return;
  }
  const rec = {
    ts: new Date().toLocaleString(),
    name: $('#name').value.trim() || '-',
    phone: $('#phone').value.trim() || '-',
    whatsapp: $('#whatsapp').value.trim() || '-',
    ptype: $('#ptype').value || '-',
    location: $('#location').value.trim() || '-',
    budgetMin: $('#budgetMin').value || '',
    budgetMax: $('#budgetMax').value || '',
    notes: $('#notes').value.trim() || ''
  };
  const list = loadDB();
  list.unshift(rec);
  saveDB(list);
  toast('Submitted');
  this.reset();
  renderTable();
});

/* Admin: show saved requirements from localStorage */
function renderTable(){
  const body = $('#reqBody');
  const rows = loadDB();
  body.innerHTML = '';
  rows.forEach(r=>{
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${r.ts}</td><td>${r.name}</td><td>${r.phone}</td><td>${r.ptype}</td><td>${r.location}</td>`;
    body.appendChild(tr);
  });
}

/* Admin button protected by password */
$('#adminBtn').addEventListener('click', ()=>{
  const p = prompt('Enter Admin Password');
  if(p === ADMIN_PASSWORD){
    $('#adminPanel').style.display = 'block';
    renderTable();
    window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
    toast('Admin unlocked');
  } else {
    toast('Wrong Password');
  }
});

/* Init */
renderClassifieds();

/* Prevent horizontal scroll on small devices */
(function preventOverflow(){
  document.documentElement.style.overflowX = 'hidden';
  document.body.style.overflowX = 'hidden';
})();
</script>
</body>
</html>